(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{21:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),s=n(14),c=n.n(s),r=n(7),i=(n(21),n(16)),l=n(13),u=n.n(l),p=n(15),d=n(3),m=n(2),f=n.p+"static/media/header__logo.03b78ada.svg",_=n(0);var j=function(e){var t=e.loggedIn,n=e.currentUserLogin,a=e.logOut,o=Object(m.f)(),s="\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",c="\u0412\u043e\u0439\u0442\u0438",i="\u0412\u044b\u0439\u0442\u0438",l="/sign-up",u="/sign-in";return Object(_.jsxs)("header",{className:"header",children:[Object(_.jsx)("img",{src:f,className:"header__logo",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f Mesto Russia"}),Object(_.jsx)(r.b,{to:"/",className:"header__profile-button",children:t?"".concat(n):null}),t?Object(_.jsx)(r.b,{to:"/",className:"header__entrance-button",onClick:function(){a()},children:i}):Object(_.jsx)(r.b,{className:"header__entrance-button",to:o.pathname===l?"".concat(u):o.pathname===u?"".concat(l):t?"".concat(i):c,children:o.pathname===l?"".concat(c):o.pathname===u?"".concat(s):t?"".concat(i):c})]})},b=Object(a.createContext)();var h=function(e){var t=e.item,n=e.owner,a=e.onCardClick,s=e.onCardLike,c=e.onCardDel,r=o.a.useState(!1),i=Object(d.a)(r,2),l=i[0],u=i[1],p=o.a.useContext(b),m=Object(d.a)(p,1)[0];return o.a.useEffect((function(){t.likes.some((function(e){return e===m._id}))?u(!0):u(!1)}),[t.likes,m._id]),Object(_.jsxs)("div",{className:"elements__element",children:[n?Object(_.jsx)("button",{className:"elements__delete-button",type:"button",onClick:function(){c(t)}}):null,Object(_.jsx)("a",{className:"elements__picture-link",href:"#/",target:"_self",onClick:function(){a(t)},children:Object(_.jsx)("img",{className:"elements__picture",alt:t.name,src:t.link})}),Object(_.jsxs)("div",{className:"elements__caption",children:[Object(_.jsx)("h2",{className:"elements__caption-text",children:t.name}),Object(_.jsxs)("div",{className:"elements__like",children:[Object(_.jsx)("button",{className:"elements__like-button ".concat(l?"elements__like-button_active":""),type:"button",onClick:function(){s(t)}}),Object(_.jsx)("span",{className:"elements__like-count",children:t.likes.length})]})]})]})};var O=function(e){var t=e.isEditAvatarPopupOpen,n=e.isEditProfilePopupOpen,a=e.isAddPlacePopupOpen,s=e.onCardDel,c=e.onCardClick,r=e.cards,i=(e.setCards,e.onCardLike),l=o.a.useContext(b),u=Object(d.a)(l,1)[0],p=function(e){i(e)};return Object(_.jsxs)("main",{children:[Object(_.jsxs)("section",{className:"profile",children:[Object(_.jsxs)("div",{className:"profile__avatar-container",children:[Object(_.jsx)("button",{className:"profile__avatar-edit",onClick:t}),Object(_.jsx)("img",{className:"profile__avatar",src:u.avatar,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]}),Object(_.jsxs)("div",{className:"profile__info",children:[Object(_.jsx)("h1",{className:"profile__name",children:u.name}),Object(_.jsx)("button",{className:"profile__edit-button",type:"button",onClick:n}),Object(_.jsx)("p",{className:"profile__status",children:u.about})]}),Object(_.jsx)("button",{className:"profile__add-button",type:"button",onClick:a})]}),Object(_.jsx)("section",{className:"elements",children:r&&r.map((function(e){return Object(_.jsx)(h,{item:e,owner:e.owner===u._id,onCardClick:c,onCardDel:s,onCardLike:function(e){p(e)}},e._id)}))})]})};var x=function(){return Object(_.jsx)("footer",{className:"footer",children:Object(_.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Mesto Russia"})})},g=n(6),v=n(4);var C=function(e){var t=e.isOpen,n=e.onClose,a=e.formTitle,o=e.buttonTitle,s=e.buttonTitleLoading,c=e.children,r=e.onSubmit,i=e.onLoad,l=e.className;return e.resetForm,Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("section",{className:"popup-overlay ".concat(t?"popup-overlay_active":""),onClick:n}),Object(_.jsx)("section",{className:"popup ".concat(t?"popup_active":""),children:Object(_.jsxs)("div",{className:"popup__window",children:[Object(_.jsx)("button",{className:"popup__close-button",type:"button",onClick:n}),Object(_.jsxs)("form",{onSubmit:r,className:l,children:[Object(_.jsx)("h2",{className:"popup__form-title",children:a}),Object(_.jsxs)("fieldset",{className:"popup__form-fieldset",children:[c,Object(_.jsx)("input",{type:"submit",className:"popup__form-submit-button popup__form-submit-button_form_profile",value:"".concat(i?s:o),disabled:i})]})]})]})})]})};var k=function(e){var t=e.isOpen,n=e.onClose,a=e.onLoad,s=e.onChangeUserpic,c=o.a.useContext(b),r=Object(d.a)(c,1)[0],i=o.a.useState({avatar:""}),l=Object(d.a)(i,2),u=l[0],p=l[1];return o.a.useEffect((function(){p({avatar:r.avatar})}),[r,t]),Object(_.jsxs)(C,{className:"popup__form popup__form_state_edit-userpic",isOpen:t,onClose:n,onLoad:a,formTitle:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",buttonTitleLoading:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",onSubmit:function(e){e.preventDefault(),s(u)},children:[Object(_.jsx)("input",{type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__form-input popup__form-input_field_userpic-link",name:"avatar",id:"userpic-link-field",value:u.avatar||"",onChange:function(e){!function(e){p(Object(v.a)(Object(v.a)({},u),{},Object(g.a)({},e.target.name,e.target.value)))}(e)},required:!0}),Object(_.jsx)("span",{className:"popup__form-error-text popup__form-error-text_message_userpic-link userpic-link-field-error"})]})};var N=function(e){var t=e.isOpen,n=e.onClose,a=(e.formTitle,e.buttonTitle,e.onAddPlace),s=e.onLoad,c=o.a.useState({name:"",link:""}),r=Object(d.a)(c,2),i=r[0],l=r[1],u=function(e){l(Object(v.a)(Object(v.a)({},i),{},Object(g.a)({},e.target.name,e.target.value)))};return o.a.useEffect((function(){l({name:"",link:""})}),[t]),Object(_.jsxs)(C,{className:"popup__form popup__form_state_add-place",isOpen:t,onClose:n,onLoad:s,formTitle:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonTitle:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",buttonTitleLoading:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...",onSubmit:function(e){e.preventDefault(),a(i)},children:[Object(_.jsx)("input",{value:i.name,type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__form-input popup__form-input_field_place-name",name:"name",id:"place-name-field",onChange:function(e){u(e)}}),Object(_.jsx)("span",{className:"popup__form-error-text popup__form-error-text_message_place-name place-name-field-error"}),Object(_.jsx)("input",{value:i.link,type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__form-input popup__form-input_field_picture-link",name:"link",id:"picture-link-field",onChange:function(e){u(e)}}),Object(_.jsx)("span",{className:"popup__form-error-text popup__form-error-text_message_picture-link picture-link-field-error"})]})};var y=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,s=(e.resetForm,e.onLoad),c=o.a.useContext(b),r=Object(d.a)(c,1)[0],i=o.a.useState({name:"",about:""}),l=Object(d.a)(i,2),u=l[0],p=l[1],m=function(e){p(Object(v.a)(Object(v.a)({},u),{},Object(g.a)({},e.target.name,e.target.value)))};return o.a.useEffect((function(){p({name:r.name,about:r.about})}),[r,t]),Object(_.jsxs)(C,{className:"popup__form popup__form_state_edit-profile",isOpen:t,onClose:n,onLoad:s,formTitle:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",buttonTitleLoading:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",onSubmit:function(e){e.preventDefault(),a(u)},children:[Object(_.jsx)("input",{type:"text",placeholder:"\u0418\u043c\u044f",className:"popup__form-input popup__form-input_field_name",name:"name",id:"name-field",value:u.name||"",onChange:function(e){m(e)}}),Object(_.jsx)("span",{className:"popup__form-error-text popup__form-error-text_message_name name-field-error"}),Object(_.jsx)("input",{type:"text",placeholder:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",className:"popup__form-input popup__form-input_field_status",name:"about",id:"about-field",value:u.about||"",onChange:function(e){m(e)}}),Object(_.jsx)("span",{className:"popup__form-error-text popup__form-error-text_message_status status-field-error"})]})};var w=function(e){var t=e.card,n=e.isOpen,a=e.onClose,o=e.onLoad,s=e.onDeleteCard;return Object(_.jsx)(C,{className:"popup__form",isOpen:n,onClose:a,onLoad:o,formTitle:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonTitle:"\u0414\u0430",buttonTitleLoading:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...",onSubmit:function(e){e.preventDefault(),s(t)}})};var A=function(e){var t=e.card,n=e.isOpen,a=e.onClose;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("section",{className:"popup-overlay ".concat(n?"popup-overlay_active":""),onClick:a}),Object(_.jsx)("section",{className:"popup ".concat(n?"popup_active":""," popup_state_picture-full"),children:Object(_.jsxs)("div",{className:"popup__window popup__window_state_picture-full",children:[Object(_.jsx)("button",{className:"popup__close-button popup__close-button_state_picture-full",type:"button",onClick:a}),Object(_.jsx)("img",{className:"popup__image",src:t?t.link:"",alt:t?t.name:""}),Object(_.jsx)("h2",{className:"popup__caption",children:t?t.name:""})]})})]})};var S=function(e){var t=e.onLoad,n=e.onSubmit,a=o.a.useState({email:"",password:""}),s=Object(d.a)(a,2),c=s[0],r=s[1],i=function(e){r(Object(v.a)(Object(v.a)({},c),{},Object(g.a)({},e.target.name,e.target.value)))};return o.a.useEffect((function(){r({email:"",password:""})}),[]),Object(_.jsx)("section",{className:"user-entrance user-entrance__screen_state_login",children:Object(_.jsxs)("form",{className:"user-entrance__form user-entrance__form_state_login",onSubmit:function(e){e.preventDefault(),n(c)},name:"user-entrance__form_state_login",noValidate:!0,children:[Object(_.jsx)("h2",{className:"user-entrance__form-title",children:"\u0412\u0445\u043e\u0434"}),Object(_.jsxs)("fieldset",{className:"user-entrance__form-fieldset user-entrance__form-fieldset_state_login",children:[Object(_.jsx)("input",{value:c.email,type:"text",placeholder:"Email",className:"user-entrance__form-input user-entrance__form-input_field_email",name:"email",id:"email-field",onChange:function(e){i(e)}}),Object(_.jsx)("span",{className:"user-entrance__form-error-text user-entrance__form-error-text_message_email email-field-error"}),Object(_.jsx)("input",{value:c.password,type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"user-entrance__form-input user-entrance__form-input_field_password",name:"password",id:"password-field",onChange:function(e){i(e)},autoComplete:"on"}),Object(_.jsx)("span",{className:"user-entrance__form-error-text user-entrance__form-error-text_message_password password-field-error"}),Object(_.jsx)("input",{type:"submit",className:"user-entrance__form-submit-button user-entrance__form-submit-button_form_login",disabled:t,value:"\u0412\u043e\u0439\u0442\u0438"})]})]})})};var T=function(e){var t=e.onLoad,n=e.onSubmit,a=o.a.useState({email:"",password:""}),s=Object(d.a)(a,2),c=s[0],i=s[1],l=function(e){i(Object(v.a)(Object(v.a)({},c),{},Object(g.a)({},e.target.name,e.target.value)))};return o.a.useEffect((function(){i({email:"",password:""})}),[]),Object(_.jsxs)("section",{className:"user-entrance user-entrance__screen_state_registration",children:[Object(_.jsxs)("form",{className:"user-entrance__form user-entrance__form_state_registration",onSubmit:function(e){e.preventDefault(),n(c)},name:"user-entrance__form_state_registration",noValidate:!0,children:[Object(_.jsx)("h2",{className:"user-entrance__form-title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(_.jsxs)("fieldset",{className:"user-entrance__form-fieldset user-entrance__form-fieldset_state_registration",children:[Object(_.jsx)("input",{value:c.email,type:"text",placeholder:"Email",className:"user-entrance__form-input user-entrance__form-input_field_email",name:"email",id:"email-register-field",onChange:function(e){l(e)}}),Object(_.jsx)("span",{className:"user-entrance__form-error-text user-entrance__form-error-text_message_email email-field-error"}),Object(_.jsx)("input",{value:c.password,type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"user-entrance__form-input user-entrance__form-input_field_password",name:"password",id:"password-register-field",onChange:function(e){l(e)},autoComplete:"on"}),Object(_.jsx)("span",{className:"user-entrance__form-error-text user-entrance__form-error-text_message_password password-field-error"}),Object(_.jsx)("input",{type:"submit",className:"user-entrance__form-submit-button user-entrance__form-submit-button_form_registration",disabled:t,value:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]}),Object(_.jsx)(r.b,{to:"/sign-in",className:"user-entrance__bottom-link user-entrance__bottom-link_state_registration",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})]})},L=n.p+"static/media/success.1b6082f8.svg",U=n.p+"static/media/fail.df8eddf6.svg";var E=function(e){var t=e.isOpen,n=e.onClose,a=e.onFail,o="\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!",s="\u0423\u0441\u043f\u0435\u0448\u043d\u043e",c="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.",r="\u041e\u0448\u0438\u0431\u043a\u0430",i=Object(m.g)();function l(){i("/sign-in"),n()}return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("section",{className:"popup-overlay ".concat(t?"popup-overlay_active":""),onClick:function(){return a?n():l()}}),Object(_.jsx)("section",{className:"popup ".concat(t?"popup_active":""),children:Object(_.jsxs)("div",{className:"popup__window",children:[Object(_.jsx)("button",{className:"popup__close-button",type:"button",onClick:function(){return a?n():l()}}),Object(_.jsxs)("div",{className:"popup__form",children:[Object(_.jsx)("img",{className:"popup__icon popup__icon_state_success-message",src:a?U:L,alt:a?r:s}),Object(_.jsx)("p",{className:"popup__form-caption",children:"".concat(a?c:o)})]})]})})]})};var P=function(e){var t=e.loggedIn,n=e.children;return t?n:Object(_.jsx)(m.a,{to:"/sign-in"})},D=n(10),J=n(11),R=new(function(){function e(t){Object(D.a)(this,e),this.baseUrl=t}return Object(J.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(this._getJwt())}}).then(this._checkResponse.bind(this))}},{key:"getCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(this._getJwt())}}).then(this._checkResponse.bind(this))}},{key:"setUserInfo",value:function(e,t){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(this._getJwt())},body:JSON.stringify({name:e,about:t})}).then(this._checkResponse.bind(this))}},{key:"setUserPic",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(this._getJwt())},body:JSON.stringify({avatar:e})}).then(this._checkResponse.bind(this))}},{key:"postCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(this._getJwt())},body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse.bind(this))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(this._getJwt())}}).then(this._checkResponse.bind(this))}},{key:"likeCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(this._getJwt())}}).then(this._checkResponse.bind(this))}},{key:"unLikeCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(this._getJwt())}}).then(this._checkResponse.bind(this))}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"_getJwt",value:function(){return localStorage.jwt}}]),e}())("http://localhost:3001"),I=new(function(){function e(t){Object(D.a)(this,e),this.baseUrl=t}return Object(J.a)(e,[{key:"register",value:function(e){return fetch("".concat(this.baseUrl,"/signup"),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Credentials":"true"},body:JSON.stringify({password:e.password,email:e.email})}).then(this._checkResponse.bind(this))}},{key:"auth",value:function(e){return fetch("".concat(this.baseUrl,"/signin"),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Credentials":"true"},body:JSON.stringify({password:e.password,email:e.email})}).then(this._checkResponse.bind(this))}},{key:"validation",value:function(e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e),"Access-Control-Allow-Credentials":"true"}}).then(this._checkResponse.bind(this))}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())("http://localhost:3001");var B=function(){var e=o.a.useState(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],s=o.a.useState(!1),c=Object(d.a)(s,2),r=c[0],l=c[1],f=o.a.useState(!1),h=Object(d.a)(f,2),g=h[0],v=h[1],C=o.a.useState(!1),L=Object(d.a)(C,2),U=L[0],D=L[1],J=o.a.useState(!1),B=Object(d.a)(J,2),F=B[0],z=B[1],M=o.a.useState(null),G=Object(d.a)(M,2),H=G[0],V=G[1],q=o.a.useState({}),K=Object(d.a)(q,2),Q=K[0],W=K[1],X=o.a.useState([]),Y=Object(d.a)(X,2),Z=Y[0],$=Y[1],ee=o.a.useState(!1),te=Object(d.a)(ee,2),ne=te[0],ae=te[1],oe=o.a.useState(!1),se=Object(d.a)(oe,2),ce=se[0],re=se[1],ie=o.a.useState(!1),le=Object(d.a)(ie,2),ue=le[0],pe=le[1],de=o.a.useState(!1),me=Object(d.a)(de,2),fe=me[0],_e=me[1],je=o.a.useState({}),be=Object(d.a)(je,2),he=be[0],Oe=be[1],xe=Object(m.g)();function ge(){D(!1),a(!1),v(!1),z(!1),l(!1),pe(!1),V(null)}var ve=function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,R.unLikeCard(t);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.next=9,R.likeCard(t);case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return o.a.useEffect((function(){ce&&R.getUserInfo().then((function(e){W(e)})).catch((function(e){console.log(e)}))}),[ce]),o.a.useEffect((function(){ce&&R.getCards().then((function(e){$(e)})).catch((function(e){console.log(e)}))}),[ce]),o.a.useEffect((function(){localStorage.jwt?I.validation(localStorage.jwt).then((function(e){e&&(Oe(e.email),re(!0),xe("/"))})).catch((function(e){console.log(e)})):re(!1)}),[ce]),Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(b.Provider,{value:[Q,W],children:Object(_.jsxs)("div",{className:"page",tabIndex:"0",onKeyDown:function(e){!function(e){(n||r||g||U||F)&&27===e.keyCode&&ge()}(e)},children:[Object(_.jsx)(j,{loggedIn:ce,currentUserLogin:he,logOut:function(){localStorage.removeItem("jwt"),re(!1),xe("/sign-in")}}),Object(_.jsx)(E,{isOpen:ue,onClose:ge,onFail:fe}),Object(_.jsxs)(m.d,{children:[Object(_.jsx)(m.b,{path:"*",element:Object(_.jsx)(m.a,{replace:!0,to:"/"})}),Object(_.jsx)(m.b,{path:"/sign-up",element:Object(_.jsx)(T,{onSubmit:function(e){ae(!0),I.register(e).then((function(){_e(!1)})).catch((function(e){console.log(e),_e(!0)})).finally((function(){ae(!1),pe(!0)}))},onLoad:ne})}),Object(_.jsx)(m.b,{path:"/sign-in",element:Object(_.jsx)(S,{onSubmit:function(e){ae(!0),I.auth(e).then((function(e){var t;e.token&&(localStorage.setItem("jwt",e.token),t=e.token,I.validation(t).then((function(e){e&&(Oe(e.email),re(!0),xe("/"))})).catch((function(e){console.log(e)})))})).catch((function(e){console.log(e),_e(!0),pe(!0)})).finally((function(){ae(!1)}))},onLoad:ne})}),Object(_.jsx)(m.b,{path:"/",element:Object(_.jsx)(P,{loggedIn:ce,children:Object(_.jsx)(O,{isEditAvatarPopupOpen:function(){a(!0)},isEditProfilePopupOpen:function(){v(!0)},isAddPlacePopupOpen:function(){D(!0)},onCardClick:function(e){z(!0),V(e)},onCardDel:function(e){l(!0),V(e)},cards:Z,setCards:$,onCardLike:function(e){var t=e.likes.some((function(e){return e===Q._id}));ve(e._id,t).then((function(t){var n=Z.map((function(n){return n._id===e._id?t:n}));$(n)})).catch((function(e){return console.error(e)}))}})})})]}),Object(_.jsx)(x,{}),Object(_.jsx)(w,{isOpen:r,onClose:ge,card:H,onDeleteCard:function(e){ae(!0),R.deleteCard(e._id).then((function(){$(Z.filter((function(t){return t._id!==e._id})))})).then((function(){ge()})).catch((function(e){console.log(e)})).finally((function(){ae(!1)}))},onLoad:ne}),Object(_.jsx)(k,{isOpen:n,onClose:ge,onChangeUserpic:function(e){ae(!0),R.setUserPic(e.avatar).then((function(e){W(e)})).then((function(){ge()})).catch((function(e){console.log(e)})).finally((function(){ae(!1)}))},onLoad:ne}),Object(_.jsx)(y,{isOpen:g,onClose:ge,onUpdateUser:function(e){ae(!0),R.setUserInfo(e.name,e.about).then((function(e){W(e)})).then((function(){ge()})).catch((function(e){console.log(e)})).finally((function(){ae(!1)}))},onLoad:ne}),Object(_.jsx)(N,{isOpen:U,onClose:ge,onAddPlace:function(e){ae(!0),R.postCard(e).then((function(e){$([e].concat(Object(i.a)(Z)))})).then((function(){ge()})).catch((function(e){console.log(e)})).finally((function(){ae(!1)}))},onLoad:ne}),Object(_.jsx)(A,{isOpen:F,onClose:ge,card:H})]})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),s(e),c(e)}))};c.a.render(Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(r.a,{children:Object(_.jsx)(B,{})})}),document.getElementById("root")),F()}},[[24,1,2]]]);
//# sourceMappingURL=main.db84444d.chunk.js.map